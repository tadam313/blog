{% assign page_url = site.url | append: page.url %}

<!-- facebook Open Graph Metadatas -->
<meta content="{{ site.title }}" property="og:site_name" />

{% if page.title %}
  <meta content="{{ page.title }}" property="og:title" />
  <meta content="article" property="og:type" />
{% else %}
  <meta content="{{ site.title }}" property="og:title" />
  <meta content="website" property="og:type" />
{% endif %}

{% if page.description %}
  <meta content="{{ page.description }}" property="og:description" />
{% else if page.excerpt %}
  <meta content="{{ page.excerpt | strip_html | truncatewords: 30 }}" property="og:description" />
{% else %}
  <meta content="{{ site.description }}" property="og:description" />
{% endif %}

{% if page.url %}
  <meta content="{{ page_url }}" property="og:url" />
{% endif %}

{% if page.date %}
  <meta content="{{ page.date | date_to_xmlschema }}" property="article:published_time" />
  <meta content="{{ site.url | append: '/about' | absolute_url }}" property="article:author" />
{% endif %}

{% if page.image %}
  <meta content="{{ '/assets/images/' | append: page.image | absolute_url }}" property="og:image" />
{% endif %}

{% if page.categories %}
  {% for category in page.categories limit:1 %}
  <meta content="{{ category }}" property="article:section" />
  {% endfor %}
{% endif %}

{% if page.tags %}
  {% for tag in page.tags %}
  <meta content="{{ tag }}" property="article:tag" />
  {% endfor %}
{% endif %}

<!-- Twitter cards metadatas -->
<meta name="twitter:card" content="summary" />
<meta name="twitter:site" content="@{{ site.author.name }}" />
<meta name="twitter:creator" content="@{{ site.author.name }}" />
<meta name="twitter:via" content="@{{ site.author.name }}" />

{% if page.url %}
  <meta name="twitter:url" content="{{ page_url }}" />
{% endif %}

{% if page.image %}
  <meta name="twitter:image" content="{{ '/assets/images/' | append: page.image | absolute_url }}" />
{% endif %}

{% if page.description %}
  <meta name="twitter:description" content="{{ page.description }}" />
{% else if page.excerpt %}
  <meta name="twitter:description" content="{{ page.excerpt | strip_html | truncatewords: 30 }}" />
{% else %}
  <meta name="twitter:description" content="{{ site.description }}" />
{% endif %}

<link rel="canonical" href="{{ page_url }}" />
